<!doctype html>
<html>
    <head>
        <title>TrovaVia</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="styles/example.css">
    </head>
    <body>
        <div id="content">
            <div id="mapLoading">Caricamento</div>
            <div id="myMaps"></div>
            <div id="controls">
                <label for="beginSelect">Partenza da</label>
                <select id="beginSelect">
                    <option value="Seleziona">Seleziona</option>
                    <option value="Entrata">Entrata</option>
                    <option value="A101">A101 - Aula Magna</option>
                    <option value="A102">A102</option>
                    <option value="A103">A103</option>
                    <option value="A104">A104</option>
                    <option value="A105">A105</option>
                    <option value="A106">A106</option>
                    <option value="A107">A107</option>
                    <option value="A108">A108</option>
                    <option value="AulaStudio">Aula Studio</option>
                    
                    <option value="A201">A201</option>
                    <option value="A202">A202</option>
                    <option value="A203">A203</option>
                    <option value="A204">A204</option>
                    <option value="A205">A205</option>
                    <option value="A206">A206</option>
                    <option value="A207">A207</option>
                    <option value="A208">A208</option>
                    <option value="A209">A209</option>
                    <option value="A210">A210</option>
                    <option value="A211">A211</option>
                    <option value="A212">A212</option>
                    <option value="A213">A213</option>
                    <option value="A214">A214</option>
                    <option value="A215">A215</option>
                    <option value="A216">A216</option>
                    <option value="A217">A217</option>
                    <option value="A218">A218</option>
                    <option value="A219">A219</option>
                    <option value="A220">A220</option>
                    <option value="A221">A221</option>
                    <option value="A222">A222</option>
                    <option value="A223">A223</option>
                    <option value="A224">A224</option>

                </select>
                <label for="endSelect">Mostra la strada per</label>
                <select id="endSelect">
                    <option value="Seleziona">Seleziona</option>
                    <option value="Entrata">Entrata</option>
                    <option value="A101">A101 - Aula Magna</option>
                    <option value="A102">A102</option>
                    <option value="A103">A103</option>
                    <option value="A104">A104</option>
                    <option value="A105">A105</option>
                    <option value="A106">A106</option>
                    <option value="A107">A107</option>
                    <option value="A108">A108</option>
                    <option value="AulaStudio">Aula Studio</option>
                    
                    <option value="A201">A201</option>
                    <option value="A202">A202</option>
                    <option value="A203">A203</option>
                    <option value="A204">A204</option>
                    <option value="A205">A205</option>
                    <option value="A206">A206</option>
                    <option value="A207">A207</option>
                    <option value="A208">A208</option>
                    <option value="A209">A209</option>
                    <option value="A210">A210</option>
                    <option value="A211">A211</option>
                    <option value="A212">A212</option>
                    <option value="A213">A213</option>
                    <option value="A214">A214</option>
                    <option value="A215">A215</option>
                    <option value="A216">A216</option>
                    <option value="A217">A217</option>
                    <option value="A218">A218</option>
                    <option value="A219">A219</option>
                    <option value="A220">A220</option>
                    <option value="A221">A221</option>
                    <option value="A222">A222</option>
                    <option value="A223">A223</option>
                    <option value="A224">A224</option>
                </select>
                <!--
                <label for="accessible">Accessible</label>
                <input id="accessible" type="checkbox" name="accessible" value="Accessible" />
                -->
            </div>
        </div>
        <div>
            <p>Scegli la partenza e la destinazione usando i corrispondenti drop-down menu.</p>
        </div>

        <!--  ONLINE
        <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script> 
        <script src="http://wafi.iit.cnr.it/webvis/tmp/wayfinding/scripts/jquery.wayfinding.js"></script>
        -->

        <!-- OFFLINE -->
        <script src="scripts/jquery-3.2.1.js"></script>
        <script src="scripts/d3.js"></script> 
        <script src="scripts/jquery.wayfinding.js"></script>

        <script>
            // Variabili per WayFinding
            var MAPS = [{'path': 'floor1.svg', 'id': 'floor1'},{'path': 'floor2.svg', 'id': 'floor2'}];
            var START_ROOM = 'Entrance';
            var DEFAULT_MAP = 'floor1';
            var lastRoomSelected;

            // Impostazione WayFinding
            $(document).ready(function () {
                'use strict';
                $('#myMaps').wayfinding({
                    'maps': MAPS,
                    'path': { width: 25, color: 'red', radius: 8, speed: 1
                    },
                    'startpoint': function () {
                        return START_ROOM;
                    },
                    'defaultMap': DEFAULT_MAP
                });

                // Permette di cliccare i bottoni menu
                $("#controls button").click(function () {
                    $("#myMaps").wayfinding('currentMap',$(this).attr('id'));
                });
                $('#controls #beginSelect').change(function () {
                    $('#myMaps').wayfinding('startpoint', $(this).val());
                    if ($('#controls .endSelect').val() !== '') {
                        $('#myMaps').wayfinding('routeTo', $('#controls #endSelect').val());
                    }
                });

                $('#controls #endSelect').change(function () {
                    $('#myMaps').wayfinding('routeTo', $(this).val());
                });

                $('#controls #accessible').change(function () {
                    if ($('#controls #accessible:checked').val() !== undefined) {
                        $('#myMaps').wayfinding('accessibleRoute', true);
                    } else {
                        $('#myMaps').wayfinding('accessibleRoute', false);
                    }
                    $('#myMaps').wayfinding('routeTo', $('#controls #endSelect').val());
                });
            });
        </script>
    </body>
</html>